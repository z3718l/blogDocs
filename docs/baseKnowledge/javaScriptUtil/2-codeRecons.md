# 代码重构

## 一、重构原则
### 1. 何为重构
- 重构（名词）：对软件内部结构的一直调整，目的是在不改变软件可观察行为的前提下，提高其可理解性，降低其修改成本。
- 重构（动词）：使用一系列重构手法，在不改变软件可观察行为的前提下，调整其结构。
简单说，重构就是提高代码可读性、可维护性以及运行速度。
### 2. 何时重构
- 重复性工作，既有的代码无法帮助你轻松的添加新特性时
- 修补bug时，排查逻辑困难
- 太多的代码没有注释，依然连自己都无法快速理清代码逻辑
## 二、代码的坏味道
- 重复代码
  - 同一段代码在多个函数中使用
- 过长函数
  - 一个函数体过于庞大，写了很多的逻辑，耦合度太高，无法复用
- 过长的参数列
  - 一个函数传了很多个参数
  - 理论上函数的参数应该小于等于2个
- 散弹式修改
  - 如果遇到某种变化，要在不同的函数或者组件做许多小的改动
- 依恋情结
  - 一个函数依赖的东西太多
- 过多的注释
  - 注释要有，但不能太多，不能像写作文一样的把某个函数的功能从前到后讲一遍
  - 注释要短小精炼，能概括主要功能即可
## 三、重构选择
- 重构其实可以是一个时刻进行的工作，没有硬性要求非要抽固定的时间进行重构。
- 但是重构之前一定要做好自测并上报领导，不要看着一坨代码不舒服，就给他重构，也不评估工作量和上线时间
- 重构要等到系统稳定了，迭代了再去重构，不要这边还在迭代需求，那边就要大范围的重构
- 重构其实可小范围的进行
